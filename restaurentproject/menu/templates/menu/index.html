{% extends "menu/base.html" %}
{% load static %}


<style>

    {% block style-content %}
    .category_items{
        background-size: cover;
        background-color: white;
        border: none;
        margin-left: 1335px;
        margin-top: 50px;
        width: 60px;
        height: 60px;
        border-radius: 17px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
        transition: 0.2s;
        /* position: absolute;  */
        margin-right: 5px;
        margin-left: 10px;
        margin-top: 15px;
    }
    .category_items:hover{
        transform: translateY(-5px);
    }
    .category_images{
        width: 50px;
        height: 50px;
        border-radius: 17px;
        padding-right: 1px;
    }
    .category_items_name{
        font-size: 10px;
        margin-top: 13px;
        margin-left: 10px;
        /* position: absolute; */
    }
    .scroolbar{
        overflow-x: scroll;
        overflow-y: hidden;
        white-space: nowrap;
        padding-bottom: 40px;
        scrollbar-color: #e50a8e #f5f5f5
    }

    .menu_item{
        margin-bottom: 50px;
        height:180px;
        background-color: white;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
        
    } 
    .hr-style{
        border: none;
        border-top: 2px dashed #e50a8e;
        width: 50%;
        margin: 60px auto 40px auto;
    }
    .item-image{
        width: 140px;
        height: 140px;
        object-fit: cover;
        border-radius: 8px;
        margin-bottom: 5px;
        margin-right: 390px;
        margin-top: 15px;
        margin-bottom: 15px;
        position: relative;
    }
    .item-name{
        margin-top: -150px;
        margin-left: -365px;
        position: absolute; 
    }
    .item-description{
        position: absolute;
        margin-left: 160px;
        margin-top: -120px;
        width: 375px;
        overflow-wrap: break-word;
        white-space: normal;
        text-align: left;
        line-height: 1.1;
        font-weight: lighter;
    }
    .item-price{
        position: absolute;
        margin-left: 160px;
        margin-top: -30px;
    }
    .unavailable-image{
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 8px;
        margin-bottom: 5px;
        margin-right: 390px;
        margin-top: 15px;
        margin-bottom: 15px;
        position: relative;
    }
    {% endblock %}

</style>



    {% block content %}

<!-- کتگوری های هر غذا-->

        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 30px; padding-left: 148px; padding-right: 176px; padding-bottom: 40px;">
            <div class="scroolbar">
                {% for category in categories %}
                    <a href="#{{ category.name|slugify }}">
                        <button class="category_items">
                            <img src="{{ category.image.url }}" alt="{{ category.name }}" class="category_images"> 
                                <p class="category_items_name">
                                    {{ category.name }}
                                </p> 
                        </button>
                    </a>
                {% endfor %} 
            </div>
        </div>


<!-- ایتم های غذا ک توی مستطیل هستن کد های پایینن  -->

    <!-- <div class="container text-center">
        <div class="row text-end moosh">
            {% for product in available_products %} 
                <div class="menu_item mt-1 mx-5 col-5"> 
                    <hr>
                    <strong> {{product.name}} </strong> 
                    <hr>
                    <p> {{product.description}} </p>
                    <p> {{product.price}} </p>
                </div>
            {% endfor %} 
        </div>
    </div> -->






<div class="container text-center">
    {% for category in categories %} <!-- جدید: برای هر کتگوری -->

        
            <!-- خط جداکننده با نام دسته وسطش -->
            <div style="display: flex; align-items: center; margin: 20px ;">
                <hr class="hr-style" style="flex: 1; border: none; border-top: 3px solid #5b5b5b; margin: 0 10px; border-radius: 10px;">
                <span style="white-space: nowrap; font-weight: bold; color: #555;">{{ category.name }}</span>
                <hr class="hr-style" style="flex: 1; border: none; border-top: 3px solid #5b5b5b; margin: 0 10px; border-radius: 10px;">
            </div> <!-- جدید -->
       


        <div id="{{ category.name|slugify }}"></div> <!-- جدید: اسکرول به این نقطه -->

        <div class="row text-end moosh"> <!-- جدید: ردیف جدا برای هر دسته -->
            {% with category.product_set.all as items %} <!-- جدید: گرفتن آیتم‌های مربوط به هر کتگوری -->
                {% for product in items %}
                    {% if forloop.last and not forloop.counter|divisibleby:2 %} <!-- جدید: اگر آخریه و فرده -->
                        <div class="menu_item mt-1 col-5 mx-auto"> <!-- جدید: وسط‌چین -->
                    {% else %}
                        <div class="menu_item mt-1 col-5 mx-auto"> <!-- معمولی -->
                    {% endif %}

                            {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="item-image">
                            {% else %}
                                <img src="{% static 'images/download.png' %}" alt="default image" class="unavailable-image">
                            {% endif %}
                            
                            <strong class="item-name"> {{ product.name }} </strong> 
                           
                            <p class="item-description"> {{ product.description }} </p>
                            <p class="item-price"> {{ product.price }} </p>
                        </div>
                {% endfor %}
            {% endwith %}
        </div>
    {% endfor %}
</div>



<!-- با کدای زیر کتگوری های اسکرول بار از سمت راست میان -->

<!-- <script>
  document.addEventListener("DOMContentLoaded", function () {
    const scrollbar = document.querySelector('.scroolbar');
    if (scrollbar) {
      scrollbar.scrollTo({
        left: scrollbar.scrollWidth,
        behavior: 'smooth'  // اسکرول نرم و قشنگ
      });
    }
  });
</script> -->



<script>
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const targetID = this.getAttribute('href').substring(1);
    const targetElement = document.getElementById(targetID);
    if (targetElement) {
      // فاصله بالایی که میخوای (مثلاً 50 پیکسل)
      const offset = 250;
      const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
      const offsetPosition = elementPosition - offset;
      
      window.scrollTo({
        top: offsetPosition,
        behavior: 'smooth'
      });
    }
  });
});
</script>





    {% endblock %}
    


{% block food-items %}



{% endblock %}

